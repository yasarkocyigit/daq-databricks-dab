resources:
  jobs:
    monitoring:
      name: "MDI_Monitoring_${var.environment}"
      schedule:
        quartz_cron_expression: "0 */30 * * * ?"
        timezone_id: "America/New_York"
      tasks:
        - task_key: health_check
          notebook_task:
            notebook_path: ../src/utils/health_check.py
            base_parameters:
              catalog: ${var.catalog}
              environment: ${var.environment}
              bronze_raw_schema: ${var.bronze_raw_schema}
              silver_schema: ${var.silver_schema}
              gold_schema: ${var.gold_schema}
              control_schema: ${var.control_schema}
              checkpoint_base: ${var.checkpoint_base}
          new_cluster:
            num_workers: 1
            spark_version: "18.0.x-scala2.13"
            node_type_id: Standard_D4s_v3
          timeout_seconds: 1800
