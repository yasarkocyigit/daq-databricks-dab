resources:
  pipelines:
    silver_transform:
      name: "MDI_Silver_Transform_${var.environment}"
      target: "${var.catalog}.${var.silver_schema}"
      libraries:
        - notebook:
            path: ../src/silver/silver_dlt.py
      configuration:
        environment: ${var.environment}
        catalog: ${var.catalog}
        silver_schema: ${var.silver_schema}
        secret_scope: ${var.secret_scope}
      channel: PREVIEW
      continuous: false
      development: true
      clusters:
        - label: default
          num_workers: ${var.num_workers}
          node_type_id: Standard_DS3_v2
          spark_conf:
            spark.sql.adaptive.enabled: "true"
            spark.databricks.delta.schema.autoMerge.enabled: "true"
      photon: true
