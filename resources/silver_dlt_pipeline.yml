resources:
  pipelines:
    silver_transform:
      name: "MDI_Silver_Transform_${var.environment}"
      catalog: "${var.catalog}"
      target: "${var.silver_schema}"
      libraries:
        - notebook:
            path: ../src/silver/silver_dlt.py
      configuration:
        environment: ${var.environment}
        catalog: ${var.catalog}
        bronze_raw_schema: ${var.bronze_raw_schema}
        bronze_state_prefix: ${var.bronze_state_prefix}
        silver_quarantine_prefix: ${var.silver_quarantine_prefix}
        silver_schema: ${var.silver_schema}
        secret_scope: ${var.secret_scope}
      channel: PREVIEW
      continuous: false
      development: false
      clusters:
        - label: default
          num_workers: ${var.num_workers}
          node_type_id: Standard_D4s_v3
          spark_conf:
            spark.sql.adaptive.enabled: "true"
            spark.databricks.delta.schema.autoMerge.enabled: "true"
      photon: true
